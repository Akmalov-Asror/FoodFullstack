{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.constructSettings = exports.createBundleOptions = exports.createMaxRetriesBackoffSettings = exports.createDefaultBackoffSettings = exports.createBackoffSettings = exports.createRetryOptions = exports.CallSettings = exports.RetryOptions = void 0;\n/**\n * Encapsulates the overridable settings for a particular API call.\n *\n * ``CallOptions`` is an optional arg for all GAX API calls.  It is used to\n * configure the settings of a specific API call.\n *\n * When provided, its values override the GAX service defaults for that\n * particular call.\n *\n * Typically the API clients will accept this as the second to the last\n * argument. See the examples below.\n * @typedef {Object} CallOptions\n * @property {number=} timeout - The client-side timeout for API calls.\n * @property {RetryOptions=} retry - determines whether and how to retry\n *   on transient errors. When set to null, the call will not retry.\n * @property {boolean=} autoPaginate - If set to false and the call is\n *   configured for paged iteration, page unrolling is not performed, instead\n *   the callback will be called with the response object.\n * @property {Object=} pageToken - If set and the call is configured for\n *   paged iteration, paged iteration is not performed and requested with this\n *   pageToken.\n * @property {number} maxResults - If set and the call is configured for\n *   paged iteration, the call will stop when the number of response elements\n *   reaches to the specified size. By default, it will unroll the page to\n *   the end of the list.\n * @property {boolean=} isBundling - If set to false and the call is configured\n *   for bundling, bundling is not performed.\n * @property {BackoffSettings=} longrunning - BackoffSettings used for polling.\n * @example\n * // suppress bundling for bundled method.\n * api.bundlingMethod(\n *     param, {optParam: aValue, isBundling: false}, function(err, response) {\n *   // handle response.\n * });\n * @example\n * // suppress streaming for page-streaming method.\n * api.pageStreamingMethod(\n *     param, {optParam: aValue, autoPaginate: false}, function(err, page) {\n *   // not returning a stream, but callback is called with the paged response.\n * });\n */\n/**\n * Per-call configurable settings for retrying upon transient failure.\n * @typedef {Object} RetryOptions\n * @property {String[]} retryCodes\n * @property {BackoffSettings} backoffSettings\n */\nclass RetryOptions {\n  constructor(retryCodes, backoffSettings) {\n    this.retryCodes = retryCodes;\n    this.backoffSettings = backoffSettings;\n  }\n}\nexports.RetryOptions = RetryOptions;\nclass CallSettings {\n  /**\n   * @param {Object} settings - An object containing parameters of this settings.\n   * @param {number} settings.timeout - The client-side timeout for API calls.\n   *   This parameter is ignored for retrying calls.\n   * @param {RetryOptions} settings.retry - The configuration for retrying upon\n   *   transient error. If set to null, this call will not retry.\n   * @param {boolean} settings.autoPaginate - If there is no `pageDescriptor`,\n   *   this attrbute has no meaning. Otherwise, determines whether a page\n   * streamed response should make the page structure transparent to the user by\n   *   flattening the repeated field in the returned generator.\n   * @param {number} settings.pageToken - If there is no `pageDescriptor`,\n   *   this attribute has no meaning. Otherwise, determines the page token used\n   * in the page streaming request.\n   * @param {Object} settings.otherArgs - Additional arguments to be passed to\n   *   the API calls.\n   *\n   * @constructor\n   */\n  constructor(settings) {\n    var _a;\n    settings = settings || {};\n    this.timeout = settings.timeout || 30 * 1000;\n    this.retry = settings.retry;\n    this.autoPaginate = 'autoPaginate' in settings ? settings.autoPaginate : true;\n    this.pageToken = settings.pageToken;\n    this.maxResults = settings.maxResults;\n    this.otherArgs = settings.otherArgs || {};\n    this.bundleOptions = settings.bundleOptions;\n    this.isBundling = 'isBundling' in settings ? settings.isBundling : true;\n    this.longrunning = 'longrunning' in settings ? settings.longrunning : undefined;\n    this.apiName = (_a = settings.apiName) !== null && _a !== void 0 ? _a : undefined;\n    this.retryRequestOptions = settings.retryRequestOptions;\n  }\n  /**\n   * Returns a new CallSettings merged from this and a CallOptions object.\n   *\n   * @param {CallOptions} options - an instance whose values override\n   *   those in this object. If null, ``merge`` returns a copy of this\n   *   object\n   * @return {CallSettings} The merged CallSettings instance.\n   */\n  merge(options) {\n    if (!options) {\n      return new CallSettings(this);\n    }\n    let timeout = this.timeout;\n    let retry = this.retry;\n    let autoPaginate = this.autoPaginate;\n    let pageToken = this.pageToken;\n    let pageSize = this.pageSize;\n    let maxResults = this.maxResults;\n    let otherArgs = this.otherArgs;\n    let isBundling = this.isBundling;\n    let longrunning = this.longrunning;\n    let apiName = this.apiName;\n    let retryRequestOptions = this.retryRequestOptions;\n    // If a method-specific timeout is set in the service config, and the retry codes for that\n    // method are non-null, then that timeout value will be used to\n    // override backoff settings.\n    if (retry !== undefined && retry !== null && retry.retryCodes !== null && retry.retryCodes.length > 0) {\n      retry.backoffSettings.initialRpcTimeoutMillis = timeout;\n      retry.backoffSettings.maxRpcTimeoutMillis = timeout;\n      retry.backoffSettings.totalTimeoutMillis = timeout;\n    }\n    // If the user provides a timeout to the method, that timeout value will be used\n    // to override the backoff settings.\n    if ('timeout' in options) {\n      timeout = options.timeout;\n      if (retry !== undefined && retry !== null && retry.retryCodes.length > 0) {\n        retry.backoffSettings.initialRpcTimeoutMillis = timeout;\n        retry.backoffSettings.maxRpcTimeoutMillis = timeout;\n        retry.backoffSettings.totalTimeoutMillis = timeout;\n      }\n    }\n    if ('retry' in options) {\n      retry = mergeRetryOptions(retry || {}, options.retry);\n    }\n    if ('autoPaginate' in options && !options.autoPaginate) {\n      autoPaginate = false;\n    }\n    if ('pageToken' in options) {\n      autoPaginate = false;\n      pageToken = options.pageToken;\n    }\n    if ('pageSize' in options) {\n      pageSize = options.pageSize;\n    }\n    if ('maxResults' in options) {\n      maxResults = options.maxResults;\n    }\n    if ('otherArgs' in options) {\n      otherArgs = {};\n      for (const key in this.otherArgs) {\n        otherArgs[key] = this.otherArgs[key];\n      }\n      for (const optionsKey in options.otherArgs) {\n        otherArgs[optionsKey] = options.otherArgs[optionsKey];\n      }\n    }\n    if ('isBundling' in options) {\n      isBundling = options.isBundling;\n    }\n    if ('maxRetries' in options) {\n      retry.backoffSettings.maxRetries = options.maxRetries;\n      delete retry.backoffSettings.totalTimeoutMillis;\n    }\n    if ('longrunning' in options) {\n      longrunning = options.longrunning;\n    }\n    if ('apiName' in options) {\n      apiName = options.apiName;\n    }\n    if ('retryRequestOptions' in options) {\n      retryRequestOptions = options.retryRequestOptions;\n    }\n    return new CallSettings({\n      timeout,\n      retry,\n      bundleOptions: this.bundleOptions,\n      longrunning,\n      autoPaginate,\n      pageToken,\n      pageSize,\n      maxResults,\n      otherArgs,\n      isBundling,\n      apiName,\n      retryRequestOptions\n    });\n  }\n}\nexports.CallSettings = CallSettings;\n/**\n * Per-call configurable settings for retrying upon transient failure.\n *\n * @param {number[]} retryCodes - a list of Google API canonical error codes\n *   upon which a retry should be attempted.\n * @param {BackoffSettings} backoffSettings - configures the retry\n *   exponential backoff algorithm.\n * @return {RetryOptions} A new RetryOptions object.\n *\n */\nfunction createRetryOptions(retryCodes, backoffSettings) {\n  return {\n    retryCodes,\n    backoffSettings\n  };\n}\nexports.createRetryOptions = createRetryOptions;\n/**\n * Parameters to the exponential backoff algorithm for retrying.\n *\n * @param {number} initialRetryDelayMillis - the initial delay time,\n *   in milliseconds, between the completion of the first failed request and the\n *   initiation of the first retrying request.\n * @param {number} retryDelayMultiplier - the multiplier by which to\n *   increase the delay time between the completion of failed requests, and the\n *   initiation of the subsequent retrying request.\n * @param {number} maxRetryDelayMillis - the maximum delay time, in\n *   milliseconds, between requests. When this value is reached,\n *   ``retryDelayMultiplier`` will no longer be used to increase delay time.\n * @param {number} initialRpcTimeoutMillis - the initial timeout parameter\n *   to the request.\n * @param {number} rpcTimeoutMultiplier - the multiplier by which to\n *   increase the timeout parameter between failed requests.\n * @param {number} maxRpcTimeoutMillis - the maximum timeout parameter, in\n *   milliseconds, for a request. When this value is reached,\n *   ``rpcTimeoutMultiplier`` will no longer be used to increase the timeout.\n * @param {number} totalTimeoutMillis - the total time, in milliseconds,\n *   starting from when the initial request is sent, after which an error will\n *   be returned, regardless of the retrying attempts made meanwhile.\n * @return {BackoffSettings} a new settings.\n *\n */\nfunction createBackoffSettings(initialRetryDelayMillis, retryDelayMultiplier, maxRetryDelayMillis, initialRpcTimeoutMillis, rpcTimeoutMultiplier, maxRpcTimeoutMillis, totalTimeoutMillis) {\n  return {\n    initialRetryDelayMillis,\n    retryDelayMultiplier,\n    maxRetryDelayMillis,\n    initialRpcTimeoutMillis,\n    rpcTimeoutMultiplier,\n    maxRpcTimeoutMillis,\n    totalTimeoutMillis\n  };\n}\nexports.createBackoffSettings = createBackoffSettings;\nfunction createDefaultBackoffSettings() {\n  return createBackoffSettings(100, 1.3, 60000, null, null, null, null);\n}\nexports.createDefaultBackoffSettings = createDefaultBackoffSettings;\n/**\n * Parameters to the exponential backoff algorithm for retrying.\n * This function is unsupported, and intended for internal use only.\n *\n * @param {number} initialRetryDelayMillis - the initial delay time,\n *   in milliseconds, between the completion of the first failed request and the\n *   initiation of the first retrying request.\n * @param {number} retryDelayMultiplier - the multiplier by which to\n *   increase the delay time between the completion of failed requests, and the\n *   initiation of the subsequent retrying request.\n * @param {number} maxRetryDelayMillis - the maximum delay time, in\n *   milliseconds, between requests. When this value is reached,\n *   ``retryDelayMultiplier`` will no longer be used to increase delay time.\n * @param {number} initialRpcTimeoutMillis - the initial timeout parameter\n *   to the request.\n * @param {number} rpcTimeoutMultiplier - the multiplier by which to\n *   increase the timeout parameter between failed requests.\n * @param {number} maxRpcTimeoutMillis - the maximum timeout parameter, in\n *   milliseconds, for a request. When this value is reached,\n *   ``rpcTimeoutMultiplier`` will no longer be used to increase the timeout.\n * @param {number} maxRetries - the maximum number of retrying attempts that\n *   will be made. If reached, an error will be returned.\n * @return {BackoffSettings} a new settings.\n *\n */\nfunction createMaxRetriesBackoffSettings(initialRetryDelayMillis, retryDelayMultiplier, maxRetryDelayMillis, initialRpcTimeoutMillis, rpcTimeoutMultiplier, maxRpcTimeoutMillis, maxRetries) {\n  return {\n    initialRetryDelayMillis,\n    retryDelayMultiplier,\n    maxRetryDelayMillis,\n    initialRpcTimeoutMillis,\n    rpcTimeoutMultiplier,\n    maxRpcTimeoutMillis,\n    maxRetries\n  };\n}\nexports.createMaxRetriesBackoffSettings = createMaxRetriesBackoffSettings;\n/**\n * Creates a new {@link BundleOptions}.\n *\n * @private\n * @param {Object} options - An object to hold optional parameters. See\n *   properties for the content of options.\n * @return {BundleOptions} - A new options.\n */\nfunction createBundleOptions(options) {\n  const params = ['element_count_threshold', 'element_count_limit', 'request_byte_threshold', 'request_byte_limit', 'delay_threshold_millis'];\n  params.forEach(param => {\n    if (param in options && typeof options[param] !== 'number') {\n      throw new Error(`${param} should be a number`);\n    }\n  });\n  const elementCountThreshold = options.element_count_threshold || 0;\n  const elementCountLimit = options.element_count_limit || 0;\n  const requestByteThreshold = options.request_byte_threshold || 0;\n  const requestByteLimit = options.request_byte_limit || 0;\n  const delayThreshold = options.delay_threshold_millis || 0;\n  if (elementCountThreshold === 0 && requestByteThreshold === 0 && delayThreshold === 0) {\n    throw new Error('one threshold should be > 0');\n  }\n  return {\n    elementCountThreshold,\n    elementCountLimit,\n    requestByteThreshold,\n    requestByteLimit,\n    delayThreshold\n  };\n}\nexports.createBundleOptions = createBundleOptions;\n/**\n * Helper for {@link constructSettings}\n *\n * @private\n *\n * @param {Object} methodConfig - A dictionary representing a single\n *   `methods` entry of the standard API client config file. (See\n *   {@link constructSettings} for information on this yaml.)\n * @param {?Object} retryCodes - A dictionary parsed from the\n *   `retry_codes_def` entry of the standard API client config\n *   file. (See {@link constructSettings} for information on this yaml.)\n * @param {Object} retryParams - A dictionary parsed from the\n *   `retry_params` entry of the standard API client config\n *   file. (See {@link constructSettings} for information on this yaml.)\n * @param {Object} retryNames - A dictionary mapping the string names\n *   used in the standard API client config file to API response\n *   status codes.\n * @return {?RetryOptions} The new retry options.\n */\nfunction constructRetry(methodConfig, retryCodes, retryParams, retryNames) {\n  if (!methodConfig) {\n    return null;\n  }\n  let codes = null;\n  if (retryCodes && 'retry_codes_name' in methodConfig) {\n    const retryCodesName = methodConfig['retry_codes_name'];\n    codes = (retryCodes[retryCodesName] || []).map(name => {\n      return Number(retryNames[name]);\n    });\n  }\n  let backoffSettings = null;\n  if (retryParams && 'retry_params_name' in methodConfig) {\n    const params = retryParams[methodConfig.retry_params_name];\n    backoffSettings = createBackoffSettings(params.initial_retry_delay_millis, params.retry_delay_multiplier, params.max_retry_delay_millis, params.initial_rpc_timeout_millis, params.rpc_timeout_multiplier, params.max_rpc_timeout_millis, params.total_timeout_millis);\n  }\n  return createRetryOptions(codes, backoffSettings);\n}\n/**\n * Helper for {@link constructSettings}\n *\n * Takes two retry options, and merges them into a single RetryOption instance.\n *\n * @private\n *\n * @param {RetryOptions} retry - The base RetryOptions.\n * @param {RetryOptions} overrides - The RetryOptions used for overriding\n *   `retry`. Use the values if it is not null. If entire `overrides` is null,\n *   ignore the base retry and return null.\n * @return {?RetryOptions} The merged RetryOptions.\n */\nfunction mergeRetryOptions(retry, overrides) {\n  if (!overrides) {\n    return null;\n  }\n  if (!overrides.retryCodes && !overrides.backoffSettings) {\n    return retry;\n  }\n  const codes = overrides.retryCodes ? overrides.retryCodes : retry.retryCodes;\n  const backoffSettings = overrides.backoffSettings ? overrides.backoffSettings : retry.backoffSettings;\n  return createRetryOptions(codes, backoffSettings);\n}\n/**\n * Constructs a dictionary mapping method names to {@link CallSettings}.\n *\n * The `clientConfig` parameter is parsed from a client configuration JSON\n * file of the form:\n *\n *     {\n *       \"interfaces\": {\n *         \"google.fake.v1.ServiceName\": {\n *           \"retry_codes\": {\n *             \"idempotent\": [\"UNAVAILABLE\", \"DEADLINE_EXCEEDED\"],\n *             \"non_idempotent\": []\n *           },\n *           \"retry_params\": {\n *             \"default\": {\n *               \"initial_retry_delay_millis\": 100,\n *               \"retry_delay_multiplier\": 1.2,\n *               \"max_retry_delay_millis\": 1000,\n *               \"initial_rpc_timeout_millis\": 2000,\n *               \"rpc_timeout_multiplier\": 1.5,\n *               \"max_rpc_timeout_millis\": 30000,\n *               \"total_timeout_millis\": 45000\n *             }\n *           },\n *           \"methods\": {\n *             \"CreateFoo\": {\n *               \"retry_codes_name\": \"idempotent\",\n *               \"retry_params_name\": \"default\"\n *             },\n *             \"Publish\": {\n *               \"retry_codes_name\": \"non_idempotent\",\n *               \"retry_params_name\": \"default\",\n *               \"bundling\": {\n *                 \"element_count_threshold\": 40,\n *                 \"element_count_limit\": 200,\n *                 \"request_byte_threshold\": 90000,\n *                 \"request_byte_limit\": 100000,\n *                 \"delay_threshold_millis\": 100\n *               }\n *             }\n *           }\n *         }\n *       }\n *     }\n *\n * @param {String} serviceName - The fully-qualified name of this\n *   service, used as a key into the client config file (in the\n *   example above, this value should be 'google.fake.v1.ServiceName').\n * @param {Object} clientConfig - A dictionary parsed from the\n *   standard API client config file.\n * @param {Object} configOverrides - A dictionary in the same structure of\n *   client_config to override the settings.\n * @param {Object.<string, string[]>} retryNames - A dictionary mapping the strings\n *   referring to response status codes to objects representing\n *   those codes.\n * @param {Object} otherArgs - the non-request arguments to be passed to the API\n *   calls.\n * @return {Object} A mapping from method name to CallSettings, or null if the\n *   service is not found in the config.\n */\nfunction constructSettings(serviceName, clientConfig, configOverrides, retryNames, otherArgs) {\n  otherArgs = otherArgs || {};\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const defaults = {};\n  const serviceConfig = (clientConfig.interfaces || {})[serviceName];\n  if (!serviceConfig) {\n    return null;\n  }\n  // users can override the config from client side, like bundling options.\n  // The detailed structure of the clientConfig can be found here: https://github.com/googleapis/gax-nodejs/blob/main/src/gax.ts#L546\n  // The way to override bundling options:\n  //\n  // const customConfig = {\"interfaces\": {\"service\": {\"methods\": {\"methodName\": {\"bundling\": {..}}}}}}\n  // const client = new Client({ projectId, customConfig });\n  const overrides = (configOverrides.interfaces || {})[serviceName] || {};\n  const methods = serviceConfig.methods;\n  const overridingMethods = overrides.methods || {};\n  for (const methodName in methods) {\n    const methodConfig = methods[methodName];\n    const jsName = methodName[0].toLowerCase() + methodName.slice(1);\n    let retry = constructRetry(methodConfig, serviceConfig.retry_codes, serviceConfig.retry_params, retryNames);\n    let bundlingConfig = methodConfig.bundling;\n    let timeout = methodConfig.timeout_millis;\n    if (methodName in overridingMethods) {\n      const overridingMethod = overridingMethods[methodName];\n      if (overridingMethod) {\n        if ('bundling' in overridingMethod) {\n          bundlingConfig = overridingMethod.bundling;\n        }\n        if ('timeout_millis' in overridingMethod) {\n          timeout = overridingMethod.timeout_millis;\n        }\n      }\n      retry = mergeRetryOptions(retry, constructRetry(overridingMethod, overrides.retry_codes, overrides.retry_params, retryNames));\n    }\n    const apiName = serviceName;\n    defaults[jsName] = new CallSettings({\n      timeout,\n      retry,\n      bundleOptions: bundlingConfig ? createBundleOptions(bundlingConfig) : null,\n      otherArgs,\n      apiName\n    });\n  }\n  return defaults;\n}\nexports.constructSettings = constructSettings;","map":{"version":3,"names":["RetryOptions","constructor","retryCodes","backoffSettings","exports","CallSettings","settings","timeout","retry","autoPaginate","pageToken","maxResults","otherArgs","bundleOptions","isBundling","longrunning","undefined","apiName","_a","retryRequestOptions","merge","options","pageSize","length","initialRpcTimeoutMillis","maxRpcTimeoutMillis","totalTimeoutMillis","mergeRetryOptions","key","optionsKey","maxRetries","createRetryOptions","createBackoffSettings","initialRetryDelayMillis","retryDelayMultiplier","maxRetryDelayMillis","rpcTimeoutMultiplier","createDefaultBackoffSettings","createMaxRetriesBackoffSettings","createBundleOptions","params","forEach","param","Error","elementCountThreshold","element_count_threshold","elementCountLimit","element_count_limit","requestByteThreshold","request_byte_threshold","requestByteLimit","request_byte_limit","delayThreshold","delay_threshold_millis","constructRetry","methodConfig","retryParams","retryNames","codes","retryCodesName","map","name","Number","retry_params_name","initial_retry_delay_millis","retry_delay_multiplier","max_retry_delay_millis","initial_rpc_timeout_millis","rpc_timeout_multiplier","max_rpc_timeout_millis","total_timeout_millis","overrides","constructSettings","serviceName","clientConfig","configOverrides","defaults","serviceConfig","interfaces","methods","overridingMethods","methodName","jsName","toLowerCase","slice","retry_codes","retry_params","bundlingConfig","bundling","timeout_millis","overridingMethod"],"sources":["../../src/gax.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}