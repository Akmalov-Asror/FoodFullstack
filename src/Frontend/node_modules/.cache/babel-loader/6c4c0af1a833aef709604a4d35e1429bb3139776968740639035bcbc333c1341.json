{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.teenyRequest = exports.RequestError = void 0;\nconst node_fetch_1 = require(\"node-fetch\");\nconst stream_1 = require(\"stream\");\nconst uuid = require(\"uuid\");\nconst agents_1 = require(\"./agents\");\nconst TeenyStatistics_1 = require(\"./TeenyStatistics\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst streamEvents = require('stream-events');\nclass RequestError extends Error {}\nexports.RequestError = RequestError;\n/**\n * Convert options from Request to Fetch format\n * @private\n * @param reqOpts Request options\n */\nfunction requestToFetchOptions(reqOpts) {\n  const options = {\n    method: reqOpts.method || 'GET',\n    ...(reqOpts.timeout && {\n      timeout: reqOpts.timeout\n    }),\n    ...(typeof reqOpts.gzip === 'boolean' && {\n      compress: reqOpts.gzip\n    })\n  };\n  if (typeof reqOpts.json === 'object') {\n    // Add Content-type: application/json header\n    reqOpts.headers = reqOpts.headers || {};\n    reqOpts.headers['Content-Type'] = 'application/json';\n    // Set body to JSON representation of value\n    options.body = JSON.stringify(reqOpts.json);\n  } else {\n    if (Buffer.isBuffer(reqOpts.body)) {\n      options.body = reqOpts.body;\n    } else if (typeof reqOpts.body !== 'string') {\n      options.body = JSON.stringify(reqOpts.body);\n    } else {\n      options.body = reqOpts.body;\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  options.headers = reqOpts.headers;\n  let uri = reqOpts.uri || reqOpts.url;\n  if (!uri) {\n    throw new Error('Missing uri or url in reqOpts.');\n  }\n  if (reqOpts.useQuerystring === true || typeof reqOpts.qs === 'object') {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const qs = require('querystring');\n    const params = qs.stringify(reqOpts.qs);\n    uri = uri + '?' + params;\n  }\n  options.agent = agents_1.getAgent(uri, reqOpts);\n  return {\n    uri,\n    options\n  };\n}\n/**\n * Convert a response from `fetch` to `request` format.\n * @private\n * @param opts The `request` options used to create the request.\n * @param res The Fetch response\n * @returns A `request` response object\n */\nfunction fetchToRequestResponse(opts, res) {\n  const request = {};\n  request.agent = opts.agent || false;\n  request.headers = opts.headers || {};\n  request.href = res.url;\n  // headers need to be converted from a map to an obj\n  const resHeaders = {};\n  res.headers.forEach((value, key) => resHeaders[key] = value);\n  const response = Object.assign(res.body, {\n    statusCode: res.status,\n    statusMessage: res.statusText,\n    request,\n    body: res.body,\n    headers: resHeaders,\n    toJSON: () => ({\n      headers: resHeaders\n    })\n  });\n  return response;\n}\n/**\n * Create POST body from two parts as multipart/related content-type\n * @private\n * @param boundary\n * @param multipart\n */\nfunction createMultipartStream(boundary, multipart) {\n  const finale = `--${boundary}--`;\n  const stream = new stream_1.PassThrough();\n  for (const part of multipart) {\n    const preamble = `--${boundary}\\r\\nContent-Type: ${part['Content-Type']}\\r\\n\\r\\n`;\n    stream.write(preamble);\n    if (typeof part.body === 'string') {\n      stream.write(part.body);\n      stream.write('\\r\\n');\n    } else {\n      part.body.pipe(stream, {\n        end: false\n      });\n      part.body.on('end', () => {\n        stream.write('\\r\\n');\n        stream.write(finale);\n        stream.end();\n      });\n    }\n  }\n  return stream;\n}\nfunction teenyRequest(reqOpts, callback) {\n  const {\n    uri,\n    options\n  } = requestToFetchOptions(reqOpts);\n  const multipart = reqOpts.multipart;\n  if (reqOpts.multipart && multipart.length === 2) {\n    if (!callback) {\n      // TODO: add support for multipart uploads through streaming\n      throw new Error('Multipart without callback is not implemented.');\n    }\n    const boundary = uuid.v4();\n    options.headers['Content-Type'] = `multipart/related; boundary=${boundary}`;\n    options.body = createMultipartStream(boundary, multipart);\n    // Multipart upload\n    teenyRequest.stats.requestStarting();\n    node_fetch_1.default(uri, options).then(res => {\n      teenyRequest.stats.requestFinished();\n      const header = res.headers.get('content-type');\n      const response = fetchToRequestResponse(options, res);\n      const body = response.body;\n      if (header === 'application/json' || header === 'application/json; charset=utf-8') {\n        res.json().then(json => {\n          response.body = json;\n          callback(null, response, json);\n        }, err => {\n          callback(err, response, body);\n        });\n        return;\n      }\n      res.text().then(text => {\n        response.body = text;\n        callback(null, response, text);\n      }, err => {\n        callback(err, response, body);\n      });\n    }, err => {\n      teenyRequest.stats.requestFinished();\n      callback(err, null, null);\n    });\n    return;\n  }\n  if (callback === undefined) {\n    // Stream mode\n    const requestStream = streamEvents(new stream_1.PassThrough());\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let responseStream;\n    requestStream.once('reading', () => {\n      if (responseStream) {\n        responseStream.pipe(requestStream);\n      } else {\n        requestStream.once('response', () => {\n          responseStream.pipe(requestStream);\n        });\n      }\n    });\n    options.compress = false;\n    teenyRequest.stats.requestStarting();\n    node_fetch_1.default(uri, options).then(res => {\n      teenyRequest.stats.requestFinished();\n      responseStream = res.body;\n      responseStream.on('error', err => {\n        requestStream.emit('error', err);\n      });\n      const response = fetchToRequestResponse(options, res);\n      requestStream.emit('response', response);\n    }, err => {\n      teenyRequest.stats.requestFinished();\n      requestStream.emit('error', err);\n    });\n    // fetch doesn't supply the raw HTTP stream, instead it\n    // returns a PassThrough piped from the HTTP response\n    // stream.\n    return requestStream;\n  }\n  // GET or POST with callback\n  teenyRequest.stats.requestStarting();\n  node_fetch_1.default(uri, options).then(res => {\n    teenyRequest.stats.requestFinished();\n    const header = res.headers.get('content-type');\n    const response = fetchToRequestResponse(options, res);\n    const body = response.body;\n    if (header === 'application/json' || header === 'application/json; charset=utf-8') {\n      if (response.statusCode === 204) {\n        // Probably a DELETE\n        callback(null, response, body);\n        return;\n      }\n      res.json().then(json => {\n        response.body = json;\n        callback(null, response, json);\n      }, err => {\n        callback(err, response, body);\n      });\n      return;\n    }\n    res.text().then(text => {\n      const response = fetchToRequestResponse(options, res);\n      response.body = text;\n      callback(null, response, text);\n    }, err => {\n      callback(err, response, body);\n    });\n  }, err => {\n    teenyRequest.stats.requestFinished();\n    callback(err, null, null);\n  });\n  return;\n}\nexports.teenyRequest = teenyRequest;\nteenyRequest.defaults = defaults => {\n  return (reqOpts, callback) => {\n    const opts = {\n      ...defaults,\n      ...reqOpts\n    };\n    if (callback === undefined) {\n      return teenyRequest(opts);\n    }\n    teenyRequest(opts, callback);\n  };\n};\n/**\n * Single instance of an interface for keeping track of things.\n */\nteenyRequest.stats = new TeenyStatistics_1.TeenyStatistics();\nteenyRequest.resetStats = () => {\n  teenyRequest.stats = new TeenyStatistics_1.TeenyStatistics(teenyRequest.stats.getOptions());\n};","map":{"version":3,"names":["node_fetch_1","require","stream_1","uuid","agents_1","TeenyStatistics_1","streamEvents","RequestError","Error","exports","requestToFetchOptions","reqOpts","options","method","timeout","gzip","compress","json","headers","body","JSON","stringify","Buffer","isBuffer","uri","url","useQuerystring","qs","params","agent","getAgent","fetchToRequestResponse","opts","res","request","href","resHeaders","forEach","value","key","response","Object","assign","statusCode","status","statusMessage","statusText","toJSON","createMultipartStream","boundary","multipart","finale","stream","PassThrough","part","preamble","write","pipe","end","on","teenyRequest","callback","length","v4","stats","requestStarting","default","then","requestFinished","header","get","err","text","undefined","requestStream","responseStream","once","emit","defaults","TeenyStatistics","resetStats","getOptions"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}